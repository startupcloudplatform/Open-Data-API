<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inno.odag.mapper">

  <select id="token" parameterType="TokenDto" resultType="TokenDto">
    SELECT * FROM token
    <where>
      <if test="tokenNo != null and tokenNo != ''">
        AND token_no = #{tokenNo}
      </if>
      <if test="userNo != null and userNo != ''">
        AND user_no = #{userNo}
      </if>
   </where>
 </select>

  <insert id="tokenInsert" parameterType="TokenDto">
    INSERT INTO token(
                        token_key
                      , provider
                      , openapi_no
                      , parameter
                      , user_no
                      , create_time
                      
                     ) VALUES (
                        #{tokenKey}
                      , #{provider}
                      , #{openapiNo}
                      , #{parameter}
                      , #{userNo}
                      , #{createTime}
                     )
  </insert>

  <update id="tokenUpdate" parameterType="TokenDto">
    UPDATE token
      <set>
        <if test="updateTime != null and updateTime != ''">
          update_time = #{updateTime},
        </if>
        <if test="openapiNo != 0 and openapiNo > 0">
          openapiNo = #{openapiNo},
        </if>
        <if test="userNo != 0 and userNo > 0">
          userNo = #{userNo},
        </if>
        <if test="tokenKey != null and tokenKey != ''">
          tokenKey = #{tokenKey}
        </if>      
      </set>
     WHERE token_no = #{tokenNo} 
  </update>

  <delete id="tokenDelete" parameterType="TokenDto">
    DELETE FROM token WHERE token_no = #{tokenNo}
  </delete>

</mapper>