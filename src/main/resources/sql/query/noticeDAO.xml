<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inno.odag.mapper">

	<insert id="noticeInsert" parameterType="NoticeDto">
		INSERT INTO notice (notice_title, notice_contents, create_user_no, create_time, target)
		VALUES (#{noticeTitle}, #{noticeContents}, #{createUserNo}, #{createTime}, #{target})
	</insert>

	<select id="notice" resultType="NoticeDto" parameterType="NoticeDto">
		SELECT * FROM notice
		<where>
			<if test="noticeNo != null and noticeNo != ''">
				AND notice_no = #{noticeNo}
			</if>
		</where>
	</select>

	<select id="noticeDetail" resultType="NoticeDto" parameterType="NoticeDto">
		SELECT * FROM notice
		<where>
			<if test="noticeNo != null and noticeNo != ''">
				AND notice_no = #{noticeNo}
			</if>
		</where>
		UNION ALL(SELECT * FROM notice WHERE <![CDATA[notice_no<#{noticeNo}]]> ORDER BY notice_no DESC LIMIT 1)
		UNION ALL(SELECT * FROM notice WHERE <![CDATA[notice_no>#{noticeNo}]]> ORDER BY notice_no ASC LIMIT 1)
	</select>

	<select id="noticeList" resultType="NoticeDto" parameterType="NoticeDto">
		SELECT * FROM notice
	</select>

	<select id="noticeGroupList" resultType="NoticeDto" parameterType="Map">
		SELECT * FROM notice ORDER BY notice_no ASC LIMIT #{noticeGroupNum} OFFSET #{currentPage}
	</select>

	<select id="noticeNumber" resultType="java.lang.Integer">
		SELECT COUNT(*) FROM notice
	</select>

	<update id="noticeUpdate" parameterType="NoticeDto">
		UPDATE notice
		<set>
		  <if test="noticeTitle != null and noticeTitle !=''">
		    notice_title = #{noticeTitle},
		  </if>
		  <if test="noticeContents != null and noticeContents !=''">
		    notice_contents = #{noticeContents},
		  </if>
		  <if test="target != null and target !=''">
		    target = #{target},
		  </if>
		  <if test="updateUserNo != null and updateUserNo !=''">
		    update_user_no = #{updateUserNo},
		  </if>
		  <if test="updateTime != null and updateTime !=''">
		    update_time = #{updateTime}
		  </if>
		</set>
		WHERE notice_no = #{noticeNo}
	</update>

	<delete id="noticeDelete" parameterType="NoticeDto">
		DELETE FROM notice WHERE notice_no = #{noticeNo}
	</delete>
</mapper>