<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inno.odag.mapper">

	<insert id="userInsert" parameterType="UserDto">
		INSERT INTO user (user_id, user_pw, user_name, user_type,
		company_name, company_category, company_type, company_introduce, keyword, create_time)
		VALUES (#{userId}, #{userPw}, #{userName}, #{userType},
		#{companyName}, #{companyCategory}, #{companyType}, #{companyIntroduce},
		#{keyword}, CURRENT_TIMESTAMP())
	</insert>

	<select id="user" resultType="UserDto">
		SELECT * FROM user
		<where>
			<if test="userNo != null and userNo != ''">
				AND user_no = #{userNo}
			</if>
			<if test="userId != null and userId != ''">
				AND user_id = #{userId}
			</if>
			<if test="userName != null and userName !=''">
				AND user_name like '%'||#{userName}||'%'
			</if>
		</where>
	</select>
	
	<select id="userList" resultType="UserDto">
	  SELECT * FROM user;
	</select>

	<update id="userUpdate" parameterType="UserDto">
		UPDATE user
		<set>
		  <if test="userPw != null and userPw !=''">
		    user_pw = #{userPw},
		  </if>
		  <if test="userName != null and userName !=''">
		    user_name = #{userName},
		  </if>
		  <if test="companyName != null and companyName !=''">
		    company_name = #{companyName},
		  </if>
		  <if test="companyCategory != null and companyCategory !=''">
		    company_category = #{companyCategory},
		  </if>
		  <if test="companyType != null and companyType !=''">
		    company_type = #{companyType},
		  </if>		  
		  <if test="companyIntroduce != null and companyIntroduce !=''">
		    company_introduce = #{companyIntroduce},
		  </if>
		  <if test="keyword != null and keyword !=''">
		    keyword = #{keyword},
		  </if>
		  <if test="lastLoginTime != null and lastLoginTime !=''">
		    last_login_time = #{lastLoginTime}
		  </if>

		</set>
		WHERE user_no = #{userNo}
	</update>

	<delete id="userDelete" parameterType="UserDto">
		DELETE FROM user WHERE user_no = #{userNo}
	</delete>
	
</mapper>