<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inno.odag.mapper">

	<insert id="openapiInsert" parameterType="OpenapiDto">
		INSERT INTO openapi (openapi_no, openapi_time, openapi_name, openapi_category, openapi_use_type, openapi_result_type, openapi_provider, openapi_comment, openapi_cnt_use, openapi_cnt_bookmark, openapi_cnt_download, openapi_url, openapi_keyword)		
		VALUES (#{openapiNo}, #{openapiTime}, #{openapiName}, #{openapiCategory}, #{openapiUseType}, #{openapiResultType}, #{openapiProvider}, #{openapiComment}, #{openapiCntUse}, #{openapi_cnt_bookmark}, #{openapiCntDownload}, #{openapiUrl}, #{openapiKeyword})
	</insert>

	<select id="openapi" resultType="OpenapiDto" parameterType="OpenapiDto">
		SELECT * FROM openapi
		<where>
			<if test="openapiNo != null and openapiNo != ''">
				AND openapi_no = #{openapiNo}
			</if>
			<if test="openapiName != null and openapiName != ''">
			  AND openapi_name LIKE CONCAT('%', #{openapiName}, '%')
			</if>
            <if test="openapiCategory != null and openapiCategory !=''">
              AND openapi_category LIKE CONCAT(#{openapiCategory}, '%')
            </if>
		</where>
	</select>
	
	<select id="openapiSearch" resultType="OpenapiDto" parameterType="SearchDto">
		SELECT * FROM openapi
		<where>
			<if test="searchKeyword != null and searchKeyword !=''">
			  AND openapi_name LIKE CONCAT('%', #{searchKeyword}, '%')
			</if>
		</where>
	</select>

	<update id="openapiUpdate" parameterType="OpenapiDto">
		UPDATE openapi
		<set>
		  <if test="openapiName != null and openapiName !=''">
		    openapi_name = #{openapiName},
		  </if>
		  <if test="openapiCategory != null and openapiCategory !=''">
		    openapi_category = #{openapiCategory},
		  </if>		  
		  <if test="openapiUseType != null and openapiUseType !=''">
		    openapi_use_type = #{openapiUseType},
		  </if>
		  <if test="openapiResultType != null and openapiResultType !=''">
		    openapi_result_type = #{openapiResultType},
		  </if>
		  <if test="openapiProvider != null and openapiProvider !=''">
		    openapi_provider = #{openapiProvider},
		  </if>
		  <if test="openapiComment != null and openapiComment !=''">
		    openapi_comment = #{openapiComment}
		  </if>
		  <if test="openapiCntUse != null and openapiCntUse !=''">
		    openapi_cnt_use = #{openapiCntUse}
		  </if>		
		  <if test="openapiCntDownload != null and openapiCntDownload !=''">
		    openapi_cnt_download = #{openapiCntDownload}
		  </if>
		  <if test="openapiCntBookmark != null and openapiCntBookmark !=''">
		    openapi_cnt_bookmark = #{openapiCntBookmark}
		  </if>
		  <if test="openapiUrl != null and openapiUrl !=''">
		    openapi_url = #{openapiUrl}
		  </if>
		  
		  <if test="openapiKeyword != null and openapiKeyword !=''">
		    openapi_keyword = #{openapiKeyword}
		  </if>
		</set>
		WHERE openapi_no = #{openapiNo}
	</update>

	<delete id="openapiDelete" parameterType="OpenapiDto">
		DELETE FROM openapi WHERE openapi_no = #{openapiNo}
	</delete>

</mapper>