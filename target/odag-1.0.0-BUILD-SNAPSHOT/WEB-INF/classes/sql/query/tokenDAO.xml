<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inno.odag.mapper">

  <select id="token" parameterType="TokenDto" resultType="TokenDto">
    SELECT token_no
         , update_time
         , openapi_no
         , user_no
         , token_key
      FROM token
     <where>
       <if test="tokenNo != 0 and tokenNo > 0">
         AND token_no = #{tokenNo}
       </if>
       <if test="updateTime != null and updateTime != ''">
         AND update_time = #{updateTime}
       </if>
       <if test="openapiNo != 0 and openapiNo > 0">
         AND openapiNo = #{openapiNo}
       </if>
       <if test="userNo != 0 and userNo > 0">
         AND userNo = #{userNo}
       </if>
       <if test="tokenKey != null and tokenKey != ''">
         AND tokenKey = #{tokenKey}
       </if>
     </where> 
  </select>
  
  <insert id="tokenInsert" parameterType="TokenDto">
    INSERT INTO token(
                        token_no
                      , update_time
                      , openapi_no
                      , user_no
                      , token_key
                     ) VALUES (
                        #{tokenNo}
                      , #{updateTime}
                      , #{openapiNo}
                      , #{userNo}
                      , #{tokenKey}
                     )
  </insert>
  
  <update id="tokenUpdate" parameterType="TokenDto">
    UPDATE token
      <set>
        <if test="updateTime != null and updateTime != ''">
          update_time = #{updateTime},
        </if>
        <if test="openapiNo != 0 and openapiNo > 0">
          openapiNo = #{openapiNo},
        </if>
        <if test="userNo != 0 and userNo > 0">
          userNo = #{userNo},
        </if>
        <if test="tokenKey != null and tokenKey != ''">
          tokenKey = #{tokenKey}
        </if>      
      </set>
     WHERE token_no = #{tokenNo} 
  </update>
  
  <delete id="tokenDelete" parameterType="TokenDto">
    DELETE FROM token WHERE token_no = #{tokenNo}
  </delete>
  
</mapper>